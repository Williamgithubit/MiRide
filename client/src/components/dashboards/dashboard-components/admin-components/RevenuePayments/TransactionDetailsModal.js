import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useGetTransactionQuery, useApprovePayoutMutation, } from "@/store/Admin/adminPaymentsApi";
const TransactionDetailsModal = ({ transactionId, onClose }) => {
    const { data: tx, isLoading } = useGetTransactionQuery(transactionId, {
        skip: !transactionId,
    });
    const [approve, { isLoading: approving }] = useApprovePayoutMutation();
    if (!transactionId)
        return null;
    return (_jsxs("div", { className: "fixed inset-0 z-50 flex items-center justify-center p-4", children: [_jsx("div", { className: "absolute inset-0 bg-black/60", onClick: onClose }), _jsxs("div", { className: "bg-slate-800 text-white rounded-lg shadow-2xl z-10 w-full max-w-2xl max-h-[90vh] overflow-y-auto p-4 sm:p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsx("h3", { className: "text-lg sm:text-xl font-semibold", children: "Transaction Details" }), _jsx("button", { onClick: onClose, className: "text-slate-400 hover:text-white transition p-2", "aria-label": "Close", children: _jsx("svg", { className: "w-6 h-6", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: _jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M6 18L18 6M6 6l12 12" }) }) })] }), isLoading && (_jsx("div", { className: "text-center py-10 text-slate-400", children: "Loading transaction details..." })), !isLoading && tx && (_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 gap-4", children: [_jsxs("div", { className: "bg-slate-700/50 rounded-lg p-3", children: [_jsx("div", { className: "text-xs text-slate-400 mb-1", children: "Transaction ID" }), _jsx("div", { className: "font-mono text-sm", children: tx.transactionId })] }), _jsxs("div", { className: "bg-slate-700/50 rounded-lg p-3", children: [_jsx("div", { className: "text-xs text-slate-400 mb-1", children: "Amount" }), _jsxs("div", { className: "text-lg font-semibold text-green-400", children: ["$", tx.amount] })] }), _jsxs("div", { className: "bg-slate-700/50 rounded-lg p-3", children: [_jsx("div", { className: "text-xs text-slate-400 mb-1", children: "Customer" }), _jsx("div", { className: "text-sm", children: tx.customer?.name || "-" }), tx.customer && 'email' in tx.customer && tx.customer.email && (_jsx("div", { className: "text-xs text-slate-400 mt-1", children: tx.customer.email }))] }), _jsxs("div", { className: "bg-slate-700/50 rounded-lg p-3", children: [_jsx("div", { className: "text-xs text-slate-400 mb-1", children: "Owner" }), _jsx("div", { className: "text-sm", children: tx.owner?.name || "-" }), tx.owner && 'email' in tx.owner && tx.owner.email && (_jsx("div", { className: "text-xs text-slate-400 mt-1", children: tx.owner.email }))] }), _jsxs("div", { className: "bg-slate-700/50 rounded-lg p-3", children: [_jsx("div", { className: "text-xs text-slate-400 mb-1", children: "Car" }), _jsx("div", { className: "text-sm", children: tx.car?.title || "-" })] }), _jsxs("div", { className: "bg-slate-700/50 rounded-lg p-3", children: [_jsx("div", { className: "text-xs text-slate-400 mb-1", children: "Payment Method" }), _jsx("div", { className: "text-sm capitalize", children: tx.paymentMethod })] }), _jsxs("div", { className: "bg-slate-700/50 rounded-lg p-3", children: [_jsx("div", { className: "text-xs text-slate-400 mb-1", children: "Status" }), _jsx("span", { className: `inline-block px-2 py-1 rounded text-xs font-medium ${tx.status === 'success'
                                                    ? 'bg-green-600/20 text-green-400'
                                                    : tx.status === 'pending'
                                                        ? 'bg-yellow-600/20 text-yellow-400'
                                                        : 'bg-red-600/20 text-red-400'}`, children: tx.status })] }), _jsxs("div", { className: "bg-slate-700/50 rounded-lg p-3", children: [_jsx("div", { className: "text-xs text-slate-400 mb-1", children: "Date" }), _jsx("div", { className: "text-sm", children: new Date(tx.createdAt).toLocaleString() })] })] }), _jsxs("div", { className: "flex flex-col sm:flex-row gap-3 pt-4 border-t border-slate-700", children: [_jsx("button", { onClick: async () => {
                                            if (!tx || !tx.meta?.payoutId)
                                                return;
                                            await approve({ payoutId: tx.meta.payoutId });
                                        }, disabled: approving || tx?.status !== "success", className: "flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition", children: approving ? 'Processing...' : 'Release Payout' }), _jsx("button", { onClick: onClose, className: "flex-1 px-4 py-2.5 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition", children: "Close" })] })] }))] })] }));
};
export default TransactionDetailsModal;
