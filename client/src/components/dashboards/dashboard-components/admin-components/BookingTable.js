import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { format } from 'date-fns';
import { Car as CarIcon } from 'lucide-react';
export const BookingTable = ({ bookings, loading, pagination, onPageChange, onViewDetails, onActionClick, }) => {
    const startIndex = (pagination.currentPage - 1) * pagination.itemsPerPage;
    const endIndex = startIndex + pagination.itemsPerPage;
    const currentBookings = bookings.slice(startIndex, endIndex);
    const getStatusColor = (status) => {
        switch (status) {
            case 'Confirmed':
                return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';
            case 'Pending':
                return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';
            case 'Cancelled':
                return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
            case 'Completed':
                return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200';
            default:
                return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200';
        }
    };
    const getPaymentStatusColor = (status) => {
        switch (status) {
            case 'Paid':
                return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';
            case 'Pending':
                return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';
            case 'Failed':
                return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
            default:
                return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200';
        }
    };
    if (loading) {
        return (_jsx("div", { className: "w-full h-64 flex items-center justify-center", children: _jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500" }) }));
    }
    return (_jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden", children: [_jsx("div", { className: "hidden md:block", children: _jsxs("table", { className: "min-w-full divide-y divide-gray-200 dark:divide-gray-600", children: [_jsx("thead", { className: "bg-gray-50 dark:bg-gray-700", children: _jsxs("tr", { children: [_jsx("th", { scope: "col", className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Booking Details" }), _jsx("th", { scope: "col", className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Car" }), _jsx("th", { scope: "col", className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Customer" }), _jsx("th", { scope: "col", className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Owner" }), _jsx("th", { scope: "col", className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Status" }), _jsx("th", { scope: "col", className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Actions" })] }) }), _jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-600", children: currentBookings.map((booking) => (_jsxs("tr", { className: "hover:bg-gray-50 dark:hover:bg-gray-700", children: [_jsx("td", { className: "px-6 py-4", children: _jsxs("div", { className: "text-sm", children: [_jsxs("p", { className: "font-medium text-gray-900 dark:text-white", children: ["ID: ", booking.id] }), _jsxs("p", { className: "text-gray-500 dark:text-gray-400", children: [format(new Date(booking.startDate), 'MMM dd, yyyy'), " \u2192", ' ', format(new Date(booking.endDate), 'MMM dd, yyyy')] }), _jsxs("p", { className: "font-medium text-gray-900 dark:text-white", children: ["$", booking.totalCost] }), _jsx("span", { className: `inline-flex px-2 text-xs font-semibold rounded-full ${getPaymentStatusColor(booking.paymentStatus)}`, children: booking.paymentStatus })] }) }), _jsx("td", { className: "px-6 py-4", children: _jsxs("div", { className: "flex items-center", children: [_jsxs("div", { className: "h-10 w-10 flex-shrink-0", children: [booking.car.imageUrl ? (_jsx("img", { className: "h-10 w-10 rounded-lg object-cover", src: booking.car.imageUrl, alt: booking.car.name, onError: (e) => {
                                                                e.currentTarget.style.display = 'none';
                                                                e.currentTarget.nextElementSibling?.classList.remove('hidden');
                                                            } })) : null, _jsx("div", { className: `h-10 w-10 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center ${booking.car.imageUrl ? 'hidden' : ''}`, children: _jsx(CarIcon, { className: "w-5 h-5 text-gray-500 dark:text-gray-400" }) })] }), _jsxs("div", { className: "ml-4", children: [_jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-white", children: booking.car.name }), _jsx("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: booking.car.model })] })] }) }), _jsx("td", { className: "px-6 py-4", children: _jsxs("div", { className: "text-sm", children: [_jsx("div", { className: "font-medium text-gray-900 dark:text-white", children: booking.customer.name }), _jsx("div", { className: "text-gray-500 dark:text-gray-400", children: booking.customer.email })] }) }), _jsx("td", { className: "px-6 py-4", children: _jsxs("div", { className: "text-sm", children: [_jsx("div", { className: "font-medium text-gray-900 dark:text-white", children: booking.owner.name }), _jsx("div", { className: "text-gray-500 dark:text-gray-400", children: booking.owner.email })] }) }), _jsx("td", { className: "px-6 py-4", children: _jsx("span", { className: `inline-flex px-2 text-xs font-semibold rounded-full ${getStatusColor(booking.bookingStatus)}`, children: booking.bookingStatus }) }), _jsxs("td", { className: "px-6 py-4 text-sm font-medium space-x-2", children: [_jsx("button", { onClick: () => onViewDetails(booking.id), className: "text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300", children: "View" }), booking.bookingStatus === 'Pending' && (_jsxs(_Fragment, { children: [_jsx("button", { onClick: () => onActionClick('approve', booking.id), className: "text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300", children: "Approve" }), _jsx("button", { onClick: () => onActionClick('cancel', booking.id), className: "text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300", children: "Cancel" })] }))] })] }, booking.id))) })] }) }), _jsx("div", { className: "md:hidden", children: _jsx("div", { className: "grid grid-cols-1 gap-4 sm:px-6 py-4", children: currentBookings.map((booking) => (_jsxs("div", { className: "bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600", children: [_jsxs("div", { className: "flex justify-between items-start mb-2", children: [_jsxs("div", { children: [_jsxs("p", { className: "font-medium text-gray-900 dark:text-white", children: ["Booking ID: ", booking.id] }), _jsxs("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: [format(new Date(booking.startDate), 'MMM dd, yyyy'), " \u2192", ' ', format(new Date(booking.endDate), 'MMM dd, yyyy')] })] }), _jsx("span", { className: `inline-flex px-2 text-xs font-semibold rounded-full ${getStatusColor(booking.bookingStatus)}`, children: booking.bookingStatus })] }), _jsxs("div", { className: "flex items-center mb-2", children: [_jsxs("div", { className: "h-10 w-10 flex-shrink-0 mr-3", children: [booking.car.imageUrl ? (_jsx("img", { className: "h-10 w-10 rounded-lg object-cover", src: booking.car.imageUrl, alt: booking.car.name, onError: (e) => {
                                                    e.currentTarget.style.display = 'none';
                                                    e.currentTarget.nextElementSibling?.classList.remove('hidden');
                                                } })) : null, _jsx("div", { className: `h-10 w-10 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center ${booking.car.imageUrl ? 'hidden' : ''}`, children: _jsx(CarIcon, { className: "w-5 h-5 text-gray-500 dark:text-gray-400" }) })] }), _jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: booking.car.name }), _jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: booking.car.model })] })] }), _jsxs("div", { className: "mb-2", children: [_jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: ["Customer: ", booking.customer.name] }), _jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: booking.customer.email })] }), _jsxs("div", { className: "mb-2", children: [_jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: ["Owner: ", booking.owner.name] }), _jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: booking.owner.email })] }), _jsxs("div", { className: "flex justify-between items-center mt-3", children: [_jsxs("div", { children: [_jsxs("p", { className: "font-medium text-gray-900 dark:text-white", children: ["$", booking.totalCost] }), _jsx("span", { className: `inline-flex px-2 text-xs font-semibold rounded-full ${getPaymentStatusColor(booking.paymentStatus)}`, children: booking.paymentStatus })] }), _jsxs("div", { className: "space-x-2", children: [_jsx("button", { onClick: () => onViewDetails(booking.id), className: "text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300", children: "View" }), booking.bookingStatus === 'Pending' && (_jsxs(_Fragment, { children: [_jsx("button", { onClick: () => onActionClick('approve', booking.id), className: "text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300", children: "Approve" }), _jsx("button", { onClick: () => onActionClick('cancel', booking.id), className: "text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300", children: "Cancel" })] }))] })] })] }, booking.id))) }) }), _jsxs("div", { className: "bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-600 sm:px-6", children: [_jsxs("div", { className: "flex-1 flex justify-between sm:hidden", children: [_jsx("button", { onClick: () => onPageChange(pagination.currentPage - 1), disabled: pagination.currentPage === 1, className: "relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50", children: "Previous" }), _jsx("button", { onClick: () => onPageChange(pagination.currentPage + 1), disabled: pagination.currentPage === pagination.totalPages, className: "relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50", children: "Next" })] }), _jsxs("div", { className: "hidden sm:flex-1 sm:flex sm:items-center sm:justify-between", children: [_jsx("div", { children: _jsxs("p", { className: "text-sm text-gray-700 dark:text-gray-300", children: ["Showing ", _jsx("span", { className: "font-medium", children: startIndex + 1 }), " to", ' ', _jsx("span", { className: "font-medium", children: Math.min(endIndex, bookings.length) }), ' ', "of ", _jsx("span", { className: "font-medium", children: bookings.length }), " results"] }) }), _jsx("div", { children: _jsx("nav", { className: "relative z-0 inline-flex rounded-md shadow-sm -space-x-px", children: Array.from({ length: pagination.totalPages }, (_, i) => i + 1).map((page) => (_jsx("button", { onClick: () => onPageChange(page), className: `relative inline-flex items-center px-4 py-2 border text-sm font-medium ${page === pagination.currentPage
                                            ? 'z-10 bg-blue-50 dark:bg-blue-900 border-blue-500 text-blue-600 dark:text-blue-300'
                                            : 'bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-600'}`, children: page }, page))) }) })] })] })] }));
};
