import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { FaTimes, FaUser, FaCar, FaCalendarAlt, FaDollarSign, FaInfoCircle } from 'react-icons/fa';
import { format } from 'date-fns';
import BookingStatusBadge from '../../customer-components/booking-components/BookingStatusBadge';
import PaymentStatusBadge from '../../customer-components/booking-components/PaymentStatusBadge';
const BookingDetailsModal = ({ isOpen, onClose, booking }) => {
    if (!isOpen || !booking)
        return null;
    const formatDate = (dateString) => {
        return format(new Date(dateString), 'EEEE, MMMM d, yyyy');
    };
    const formatTime = (dateString) => {
        return format(new Date(dateString), 'h:mm a');
    };
    const calculateDuration = (startDate, endDate) => {
        const start = new Date(startDate);
        const end = new Date(endDate);
        const diffTime = Math.abs(end.getTime() - start.getTime());
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        return diffDays;
    };
    const formatDateTime = (dateString) => {
        return format(new Date(dateString), 'MMM d, yyyy â€¢ h:mm a');
    };
    return (_jsx("div", { className: "fixed inset-0 z-50 overflow-y-auto", children: _jsxs("div", { className: "flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0", children: [_jsx("div", { className: "fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 backdrop-blur-sm", onClick: onClose }), _jsxs("div", { className: "relative z-10 inline-block w-full max-w-2xl my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-gray-800 shadow-xl rounded-2xl", children: [_jsxs("div", { className: "flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white", children: "Booking Request Details" }), _jsxs("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: ["Booking ID: #", booking.id] })] }), _jsx("button", { onClick: onClose, className: "p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors", children: _jsx(FaTimes, { className: "w-5 h-5" }) })] }), _jsxs("div", { className: "p-6 space-y-6 max-h-96 overflow-y-auto", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx(BookingStatusBadge, { status: booking.status, size: "md" }), booking.paymentStatus && (_jsx(PaymentStatusBadge, { status: booking.paymentStatus, size: "md" }))] }), booking.createdAt && (_jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: ["Requested: ", formatDateTime(booking.createdAt)] }))] }), _jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-4", children: [_jsxs("div", { className: "flex items-center space-x-2 mb-3", children: [_jsx(FaCar, { className: "w-5 h-5 text-blue-600 dark:text-blue-400" }), _jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: "Vehicle Information" })] }), _jsxs("div", { className: "flex items-start space-x-4", children: [_jsx("img", { src: booking.car.image || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiBmaWxsPSIjMzc0MTUxIi8+CjxwYXRoIGQ9Ik0yNCAzNkg3Mkw2OCA1NEg2MFY0OEg1NFY1NEg0NVY0OEgzOVY1NEgzMFY0OEgyN1Y1NEgyNEwzNiAzNloiIGZpbGw9IiNGRkZGRkYiLz4KPHN2Zz4K', alt: `${booking.car.make} ${booking.car.model}`, className: "w-24 h-24 rounded-lg object-cover flex-shrink-0", onError: (e) => {
                                                        e.currentTarget.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiBmaWxsPSIjMzc0MTUxIi8+CjxwYXRoIGQ9Ik0yNCAzNkg3Mkw2OCA1NEg2MFY0OEg1NFY1NEg0NVY0OEgzOVY1NEgzMFY0OEgyN1Y1NEgyNEwzNiAzNloiIGZpbGw9IiNGRkZGRkYiLz4KPHN2Zz4K';
                                                    } }), _jsxs("div", { className: "flex-1", children: [_jsxs("div", { className: "text-lg font-medium text-gray-900 dark:text-white", children: [booking.car.make, " ", booking.car.model] }), _jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400 space-y-1", children: [_jsxs("div", { children: ["Year: ", booking.car.year] }), _jsxs("div", { children: ["Vehicle ID: #", booking.car.id] })] })] })] })] }), _jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-4", children: [_jsxs("div", { className: "flex items-center space-x-2 mb-3", children: [_jsx(FaUser, { className: "w-5 h-5 text-green-600 dark:text-green-400" }), _jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: "Customer Information" })] }), _jsxs("div", { className: "flex items-start space-x-4", children: [_jsx("div", { className: "w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center flex-shrink-0", children: booking.customer.avatar ? (_jsx("img", { src: booking.customer.avatar, alt: booking.customer.name, className: "w-16 h-16 rounded-full object-cover" })) : (_jsx(FaUser, { className: "w-8 h-8 text-blue-600 dark:text-blue-400" })) }), _jsxs("div", { className: "flex-1", children: [_jsx("div", { className: "text-lg font-medium text-gray-900 dark:text-white", children: booking.customer.name }), _jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400 space-y-1", children: [_jsxs("div", { children: ["Email: ", booking.customer.email] }), _jsxs("div", { children: ["Customer ID: #", booking.customer.id] })] })] })] })] }), _jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-4", children: [_jsxs("div", { className: "flex items-center space-x-2 mb-3", children: [_jsx(FaCalendarAlt, { className: "w-5 h-5 text-purple-600 dark:text-purple-400" }), _jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: "Rental Period" })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [_jsxs("div", { children: [_jsx("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Start Date & Time" }), _jsxs("div", { className: "text-gray-900 dark:text-white", children: [_jsx("div", { className: "font-medium", children: formatDate(booking.startDate) }), _jsx("div", { className: "text-sm", children: formatTime(booking.startDate) })] })] }), _jsxs("div", { children: [_jsx("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: "End Date & Time" }), _jsxs("div", { className: "text-gray-900 dark:text-white", children: [_jsx("div", { className: "font-medium", children: formatDate(booking.endDate) }), _jsx("div", { className: "text-sm", children: formatTime(booking.endDate) })] })] })] }), _jsxs("div", { className: "mt-3 pt-3 border-t border-gray-200 dark:border-gray-600", children: [_jsx("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: "Total Duration" }), _jsxs("div", { className: "text-lg font-medium text-gray-900 dark:text-white", children: [calculateDuration(booking.startDate, booking.endDate), " days"] })] })] }), _jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 rounded-lg p-4", children: [_jsxs("div", { className: "flex items-center space-x-2 mb-3", children: [_jsx(FaDollarSign, { className: "w-5 h-5 text-orange-600 dark:text-orange-400" }), _jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: "Pricing Information" })] }), _jsxs("div", { className: "space-y-2", children: [_jsxs("div", { className: "flex justify-between items-center", children: [_jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "Total Amount" }), _jsxs("span", { className: "text-xl font-bold text-gray-900 dark:text-white", children: ["$", (Number(booking.totalCost) || 0).toFixed(2)] })] }), _jsxs("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: ["Average per day: $", ((Number(booking.totalCost) || 0) / calculateDuration(booking.startDate, booking.endDate)).toFixed(2)] })] })] }), (booking.status === 'rejected' || booking.status === 'cancelled') && (_jsx("div", { className: "bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4", children: _jsxs("div", { className: "flex items-start space-x-2", children: [_jsx(FaInfoCircle, { className: "w-5 h-5 text-red-600 dark:text-red-400 mt-0.5" }), _jsxs("div", { children: [_jsx("h4", { className: "font-medium text-red-800 dark:text-red-200", children: booking.status === 'rejected' ? 'Rejection Reason' : 'Cancellation Information' }), _jsx("p", { className: "text-sm text-red-700 dark:text-red-300 mt-1", children: booking.status === 'rejected'
                                                            ? 'This booking was rejected by the owner.'
                                                            : 'This booking was cancelled.' })] })] }) })), booking.status === 'pending_approval' && (_jsx("div", { className: "bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4", children: _jsxs("div", { className: "flex items-start space-x-2", children: [_jsx(FaInfoCircle, { className: "w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5" }), _jsxs("div", { children: [_jsx("h4", { className: "font-medium text-blue-800 dark:text-blue-200", children: "Pending Your Approval" }), _jsx("p", { className: "text-sm text-blue-700 dark:text-blue-300 mt-1", children: "This booking request is waiting for your approval. The customer has completed payment and is waiting for confirmation." })] })] }) }))] }), _jsx("div", { className: "px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700", children: _jsx("div", { className: "flex justify-end", children: _jsx("button", { onClick: onClose, className: "px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500", children: "Close" }) }) })] })] }) }));
};
export default BookingDetailsModal;
